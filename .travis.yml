sudo: false
cache:
  directories:
  - ".cabal-sandbox/"
language: haskell
ghc: 7.8
before_install:
- cabal sandbox init
- cabal install cabal-install
install:
- cabal install --only-dependencies --enable-tests
script:
- cabal configure --enable-tests && cabal build && cabal test
- cabal run rebuild
deploy:
  provider: s3
  access_key_id:
    secure: h7eXFBGGjV31d4Xmktbiv/EbhB+evIhULNALwT5hIIQ7m2zTTfhs/1q/eiwwNzwIVDTctwC5zodj3fHwchLs7+/5HYy5UUx6g/0MFaktat2rT/IGdNtq1oLBytoab1fLT66vaqVu9x9h3QTQQuBByFK43DSfUYnEjF0K47EIosE=
  secret_access_key:
    secure: HhLC0O1EAL14SIyLQHSTrI0p+qqdakIbGI0mJyDV92hvW5BIKukIwVZpuG2Ltv3YoRqWZtodkVMzwOLLwKj6wHf96KAekVQoWOlTA6LP3WOXw6hJ/pvzbLDciQfeAuljZCA6eUMxcBCr7Iv7bafMKpdwijIfL3Edp1aIlAuYAFE=
  bucket: dev.forkk.net
  skip_cleanup: true
  local_dir: _site
  upload-dir: "$TRAVIS_BRANCH"
  endpoint: dev.forkk.net.s3-website-us-east-1.amazonaws.com
  on:
    repo: Forkk/forkk.net
    all_branches: true
